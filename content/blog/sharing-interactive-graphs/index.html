<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Amit Levinson">
<meta name="dcterms.date" content="2020-05-01">

<title>Hosting interactive graphs online</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Hosting interactive graphs online</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
    <div class="quarto-category">maps</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Amit Levinson </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 1, 2020</p>
    </div>
  </div>
    
  </div>
  

</header>

<style>
p.caption {
  font-size: 0.8em;
}
</style>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="header.gif" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">No more sending html files - Host your interactive graphs online with GitHub pages</figcaption><p></p>
</figure>
</div>
</div>
</div>
<section id="background" class="level3">
<h3 class="anchored" data-anchor-id="background">Background</h3>
<p>A few weeks ago I gave my first talk about <a href="https://amitlevinson.com/talk/israel-2050/">analyzing and visualizing data in R</a>. I shared with participants - political activists - many of R’s abilities, one of them creating ‘interactive visualizations’ which I very much like. I believe interactive graphs provide some edge to a static graph when used appropriately. The first time I created an interactive graph was probably for <a href="https://github.com/rfordatascience/tidytuesday">#TidyTuesday</a>, which left me with the question <strong>how to provide others the ability to interact with it?</strong></p>
<section id="tldr" class="level4">
<h4 class="anchored" data-anchor-id="tldr">TL;DR</h4>
<p>For those who already have a rendered html file:</p>
<ol type="1">
<li>Push the rendered html file to GitHub repository.<br>
</li>
<li>Go into your GitHub repository where the html file is located.<br>
</li>
<li>On the top right click <code>Settings</code> <i class="fas fa-arrow-right"></i> Scroll down to <code>GitHub Pages</code> section <i class="fas fa-arrow-right"></i> instead of <code>none</code> choose <code>master branch</code></li>
</ol>
<p>That’s it! You can now find your html widget under <span style="color:RoyalBlue;">username.GitHub.io/repo-name/file.html</span></p>
</section>
</section>
<section id="why-host-it-online" class="level3">
<h3 class="anchored" data-anchor-id="why-host-it-online">Why host it online?</h3>
<ul>
<li><p>Sending html <strong>files</strong> of your new interactive graph can be cumbersome, especially if it’s a work in progress with updated versions you keep sending. Enough with those <code>html_4_final_final</code> kind of files - Seriously, not cool.</p></li>
<li><p>You participated on <a href="https://github.com/rfordatascience/tidytuesday">#Tidytuesday</a> and want to share your graph for others to explore themselves. In this case I recommend recording a gif or video where you interact with the graph and also host the file online for others to explore.</p></li>
<li><p>Because once you set up your GitHub page up, it’s just 2 more lines of code saving it as a file and pushing it to your repository.</p></li>
</ul>
<p>There are many great tutorials for hosting slides and static files online that you can find <a href="https://community.rstudio.com/t/deploy-xaringan-slides-to-github-pages/16459">here</a>, <a href="https://github.com/tcgriffith/xaringan_gh">here</a>, and <a href="https://annaken.github.io/hosting-revealjs-presentation-github-pages/">here</a>. I found these very useful for hosting slides from the talk I gave and wanted to share that same tutorial aimed at hosting <code>html</code> graphs, technically the same file (html). The format is identical, but I remember when starting off with R I didn’t know how. I was naive and just pushed my html file to GitHub thinking once it’s there I can interact with it. Although it’s pretty much that, we first need to turn our GitHub repository into a GitHub page.</p>
<p><a href="https://imgflip.com/i/3z9x4s"><img src="https://i.imgflip.com/3z9x4s.jpg" title="made at imgflip.com"></a></p>
</section>
<section id="saving-an-html-file" class="level3">
<h3 class="anchored" data-anchor-id="saving-an-html-file">Saving an html file</h3>
<p>Saving an interactive graph - such as a <code>{leafly}</code>, <code>{highcharter}</code>, <code>{plotly}</code> or any other interactive object - can be done with various packages. Here I’ll use the <code>{htmlwidgets}</code> package since, in my opinion, its default settings nicely fit the browser page. You can also try out other packages and see what suits you (for e.g.&nbsp;<code>{htmltools}</code>).</p>
<p>Let’s take a #TidyTuesday dataset I used to create a <code>{highcharter}</code> map of median GDPR fines. If you’re interested in how to make such a map, you can find the source code <a href="https://github.com/AmitLevinson/TidyTuesday/blob/master/2020/week17_gdpr/gdpr.R">here</a>, or a fantastic blog detaling the process by <a href="https://kcuilla.netlify.app/post/maps-in-r/">Kyle Cuilla</a>.</p>
<p>So we have our map ready and can interact with it <strong>within R</strong> as we can see in the gif below:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="interactive-in-r.gif" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">Our interactive graph is all set in R, What’s next?</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>First, we want to render it into an html file. Make sure to save your graph into an object, let’s say for this example our object is called ‘hc_gdpr’. Before we save it using <code>htmlwidget::saveWidget</code>, we can define how the graph will render on the webpage. If you’d like to adjust it’s width and height parameters, you can add them to the html object which is saved as a list, for e.g.:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>hc_gdpro<span class="sc">$</span>width <span class="ot">&lt;-</span> <span class="st">"1400px"</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>hc_gdpro<span class="sc">$</span>height <span class="ot">&lt;-</span> <span class="st">"700px"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And now we can write our file to our current working directory. The <code>knitrOptions</code> takes our height and width configuration - Play around with it until it’s satisfactory for you; depends for what I need it but I find the default settings - seems like 100% width and 100% height - adequate for my needs:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveWidget</span>(hc<span class="sc">-</span>gdpr, <span class="st">"hc-gdpr.html"</span>, <span class="at">selfcontained =</span> <span class="cn">TRUE</span>, <span class="at">knitrOptions =</span> <span class="fu">list</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="github-pages" class="level3">
<h3 class="anchored" data-anchor-id="github-pages">GitHub Pages <i class="fab fa-github"></i></h3>
<p>Great, we now have a new html file containing our graph saved in our working directory. If you open it up it should run smoothly, only notice it’s doing so on your local computer. If you send the file as is, it will work on someone else’s computer if even if they don’t have <code>R</code>. But what if we update our graph such as fix a typo? That’s where hosting it online comes in.</p>
<p>We’ll be hosting the html file on GitHub Pages, so if you’re not familiar with Git or working with GitHub through R I recommend following <a href="https://happygitwithr.com/">happygitwithr</a> tutorial for getting your account set up.<br>
You can open a new repository for hosting your html files, but I think using the one where you host your source code is better. For example, if it’s a #TidyTuesday graph like the example here, I just push it along with my <code>R</code> source code for that week. Make sure to include the html file, hosting only the code file (.R / .Rmd) won’t render it interactive; of course you can also host the html without the code (but hey, sharing is caring when it comes to open source).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="hosted.jpg" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">After writing your html object, push it to a GitHub repository</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Now that we have our file hosted we can assign our GitHub page: In the repository your html file is hosted, click on <code>Settings</code> on the top right and scroll down until you reach the ‘GitHub Pages’ section. There you want to enable the GitHub Pages by changing the default ‘None’ to <code>master-branch</code>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="GitHub-pages.jpg" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">Turn your Github repository into a Github page</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>That’s it!</strong><br>
You can find your hosted html file at <span style="color:RoyalBlue;">username.github.io/repo-name/file.html</span>. For instance, the example I used for this blog post can be found <a href="https://amitlevinson.github.io/TidyTuesday/2020/week17_gdpr/hc_gdpr.html">here</a>.</p>
<p>Once you have a GitHub page you can do so much more with it (such as host a personal website), but that’s for a different post altogether. If you want to learn more about adding a theme to GitHub Pages check out <a href="https://resources.github.com/whitepapers/github-and-rstudio/">this post</a> by GitHub.</p>
<p>Another option to host your html file would be on <a href="https://rpubs.com/">Rpubs</a>, but I find the GitHub page option more than adequate for my needs.</p>
<p>Enjoy!</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>