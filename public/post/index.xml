<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts | Amit Levinson</title>
    <link>/post/</link>
      <atom:link href="/post/index.xml" rel="self" type="application/rss+xml" />
    <description>Posts</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>¬© Amit Levinson 2020</copyright><lastBuildDate>Mon, 03 Feb 2020 00:00:00 +0000</lastBuildDate>
    <image>
      <url>/images/icon_hudc5a425b3e555d4faa8838526864126b_16079_512x512_fill_lanczos_center_2.png</url>
      <title>Posts</title>
      <link>/post/</link>
    </image>
    
    <item>
      <title>The Tidytuesday project</title>
      <link>/2020/02/03/the-tidytuesday-project/</link>
      <pubDate>Mon, 03 Feb 2020 00:00:00 +0000</pubDate>
      <guid>/2020/02/03/the-tidytuesday-project/</guid>
      <description>


&lt;div id=&#34;what-is-tidytuesday&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;strong&gt;What is TidyTuesday?&lt;/strong&gt;&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;‚ÄúA weekly data project aimed at the R ecosystem. As this project was borne out of the R4DS Online Learning Community and the R for Data Science textbook, an emphasis was placed on understanding how to summarize and arrange data to make meaningful charts with ggplot2, tidyr, dplyr, and other tools in the tidyverse ecosystem. However, any code-based methodology is welcome - just please remember to share the code used to generate the results.‚Äù&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;You can read more about it &lt;a href=&#34;https://github.com/rfordatascience/tidytuesday&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Basically, every week the R4DS community publishes a &lt;strong&gt;new data set&lt;/strong&gt; where the R community (or any code-based methdogology) is welcome to &lt;strong&gt;analyze&lt;/strong&gt; and &lt;strong&gt;visualize&lt;/strong&gt; the data.
When I started learning R I saw it as a great opportunity to practice plotting and analzying various datasets; it‚Äôs what get me motivated and fascinated with R. Every week you‚Äôre challenged with a new data set and get to see how others have analyzed it.&lt;/p&gt;
&lt;p&gt;Whenever I have some free time I like to join in and give it a go. If you‚Äôre looking to get some practice or enjoy analyzing the same data set as others - Join the party, there‚Äôs much to learn!&lt;br /&gt;
&lt;/br&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;plots&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Plots&lt;/h2&gt;
&lt;p&gt;Below are graphs I made, organized in a descending order by date. Some I‚Äôm more proud of than others, but I choose to display all of them in case someone finds anything useful üòÑ
&lt;/br&gt;&lt;/p&gt;
&lt;div id=&#34;section&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;strong&gt;20.01.2020&lt;/strong&gt;&lt;/h3&gt;
&lt;a href=&#34;https://github.com/AmitLevinson/TidyTuesday/blob/master/2020/week4_spotify_songs/spotify_songs.R&#34;&gt;Link to code&lt;/a&gt;
&lt;p align=&#34;center&#34;&gt;
&lt;img src = &#34;/img/tt/spotify.png&#34; width = &#34;700&#34;&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-1&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;strong&gt;22.12.2019&lt;/strong&gt;&lt;/h3&gt;
&lt;a href=&#34;https://github.com/AmitLevinson/TidyTuesday/blob/master/Week51_adopted_dogs/adopted_dogs.R&#34;&gt;Link to code&lt;/a&gt;&lt;br /&gt;

&lt;p align=&#34;center&#34;&gt;
&lt;img src = &#34;/img/tt/total_breed.png&#34; width = &#34;700&#34;&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-2&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;strong&gt;11.12.2019&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/AmitLevinson/TidyTuesday/blob/master/Week50_diseases/diseases.R&#34;&gt;Link to code&lt;/a&gt;&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
&lt;img src = &#34;/img/tt/measles.gif&#34; width = &#34;700&#34;&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-3&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;strong&gt;5.12.2019&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/AmitLevinson/TidyTuesday/blob/master/Week49_parking_tickets/parking_tickets.R&#34;&gt;Link to code&lt;/a&gt;&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
&lt;img src = &#34;/img/tt/parking_tickets_hours.png&#34; width = &#34;700&#34;&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-4&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;strong&gt;6.11.2019&lt;/strong&gt;&lt;/h3&gt;
&lt;a href=&#34;https://github.com/AmitLevinson/TidyTuesday/blob/master/Week45_bike_walk/bike_walk.Rmd&#34;&gt;Link to code&lt;/a&gt;
&lt;p align=&#34;center&#34;&gt;
&lt;img src=&#34;/img/tt/bikers_and_walkers.png&#34; width=&#34;700&#34;&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-5&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;strong&gt;31.10.2019&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/AmitLevinson/TidyTuesday/blob/master/Week44_NYC_Squerrils/Squirrels.Rmd&#34;&gt;Link to code&lt;/a&gt;&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
&lt;img src=&#34;/img/tt/Central_park_squirrel.png&#34; width=&#34;700&#34;&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-6&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;strong&gt;22.10.2019&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/AmitLevinson/TidyTuesday/blob/master/Week43_Horror_Films/Horror_dis.R&#34;&gt;Link to code&lt;/a&gt;&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
&lt;img src=&#34;/img/tt/horror_movie_length.png&#34; width=&#34;700&#34;&gt;
&lt;/p&gt;
&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-7&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;strong&gt;9.10.2019&lt;/strong&gt;&lt;/h3&gt;
&lt;a href=&#34;https://github.com/AmitLevinson/TidyTuesday/blob/master/Week41_Power_lifting/ipf.R&#34;&gt;Link to code&lt;/a&gt;
&lt;p align=&#34;center&#34;&gt;
&lt;img src=&#34;/img/tt/Max_lift.jpeg&#34; width=&#34;700&#34;&gt;
&lt;/p&gt;
&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-8&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;strong&gt;6.10.2019&lt;/strong&gt;&lt;/h3&gt;
&lt;a href=&#34;https://github.com/AmitLevinson/TidyTuesday/blob/master/Week40_All%20the%20Pizza/Barstool_Top_2_Percent.R&#34;&gt;Link to code&lt;/a&gt;
&lt;p align=&#34;center&#34;&gt;
&lt;img src=&#34;/img/tt/Barstool_rating.png&#34; width=&#34;700&#34;&gt;
&lt;/p&gt;
&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-9&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;strong&gt;28.9.2019&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/AmitLevinson/TidyTuesday/blob/master/2_Week39_SchoolDiversity/School_Diversity_Updated.R&#34;&gt;Link to code&lt;/a&gt;&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
&lt;img src=&#34;/img/tt/Ethnic_div_revised.png&#34; width=&#34;700&#34;&gt;
&lt;/p&gt;
&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-10&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;strong&gt;22.9.2019&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/AmitLevinson/TidyTuesday/blob/master/1_Week38_Number%20of%20Visitors/National%20Parks.R&#34;&gt;Link to code&lt;/a&gt;&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
&lt;img src=&#34;/img/tt/National_Parks.png&#34; width=&#34;700&#34;&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;#top&#34;&gt; Back to top&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Mapping bomb shelters in Be&#39;er-Sheva, IL</title>
      <link>/2019/11/15/bomb-shelters/</link>
      <pubDate>Fri, 15 Nov 2019 00:00:00 +0000</pubDate>
      <guid>/2019/11/15/bomb-shelters/</guid>
      <description>


&lt;p&gt;While rockets were fired towards Israel I decided to take the opportunity and plot Be‚Äôer-Sheva‚Äôs bomb shelters.&lt;br /&gt;
For a while now I‚Äôve been wanting to learn how to plot maps. Seeing data frames with longitude and latitude coordinates on various occasions on &lt;a href=&#34;https://github.com/rfordatascience/tidytuesday&#34;&gt;#Tidytuesday&lt;/a&gt; encouraged me to do so.&lt;br /&gt;
A day before this piece, I discovered our municupality‚Äôs open access data &lt;a href=&#34;https://www.beer-sheva.muni.il/OpenData/Pages/default.aspx&#34;&gt;website&lt;/a&gt;. In this website you can find various data sets like street light coordinates, bomb shelters spread out in the city and more. A day after discovering it Israel, the country I live in, was fired missiles at. I decided to take the opportunity and map some of the shelters around my house. You know, just in case.&lt;/p&gt;
&lt;p&gt;Let‚Äôs begin with the packages we‚Äôll need:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#for data manipulation
library(tidyverse)
#for a nice map
library(ggmap)
#for reading and working with .geojson file
library(geojsonio)
library(sp)
#for integrating a nice font
library(extrafont)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;loading-and-tidying-the-data&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Loading and tidying the data&lt;/h3&gt;
&lt;p&gt;I initially tried using the &lt;code&gt;.csv&lt;/code&gt; file they have on their webiste but I was having too much trouble with the Hebrew so I decided to try and work with the &lt;code&gt;geojsonio&lt;/code&gt; package. I had no idea how to work with a &lt;code&gt;.geojson&lt;/code&gt; file or frankly how to work with maps in general. To my save, i found this incredible blog by&lt;a href=&#34;https://randomjohn.github.io/r-geojson-srt/&#34;&gt;John Johnson&lt;/a&gt; to help me transform a ‚Äògeomjson‚Äô file to a dataframe you can work with.&lt;/p&gt;
&lt;p&gt;Let‚Äôs begin:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#read the .geojson file
my_geojson &amp;lt;- &amp;quot;shelters.geojson&amp;quot;
#convert the .geojson file to an sp object
data_json &amp;lt;- geojson_read(my_geojson, what = &amp;quot;sp&amp;quot;)
#now we can convert it to a nice data frame
shelters &amp;lt;- as.data.frame(data_json)
#last tidying of the column names
names(shelters)[6:7] &amp;lt;- c(&amp;quot;long&amp;quot;, &amp;quot;lat&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;What we did was load the geojson file, read it as an ‚Äòsp‚Äô object and then turn it into to a dataframe. I changed the names so that it‚Äôll be easier to read the columns. we could also use &lt;code&gt;dplyr::rename&lt;/code&gt; but I liked the base R function Johnson used in his blog so I‚Äôll stick with that.&lt;br /&gt;
let‚Äôs look at the top 3 observations of our new data frame:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;##       long      lat        name X.U.05E7..U.05D5..U.05D3._.U.05E1.
## 1 34.80821 31.25902  &amp;lt;U+05D2&amp;gt;/2                                 17
## 2 34.80789 31.25980  &amp;lt;U+05D2&amp;gt;/1                                 17
## 3 34.80937 31.25925 &amp;lt;U+05D2&amp;gt;/25                                 17
##                elc group_ F_.U.05E6..U.05D5..U.05D5..U.05EA.
## 1 &amp;lt;U+05D9&amp;gt;&amp;lt;U+05E9&amp;gt;      0                                   
## 2 &amp;lt;U+05D9&amp;gt;&amp;lt;U+05E9&amp;gt;      0                                   
## 3 &amp;lt;U+05D9&amp;gt;&amp;lt;U+05E9&amp;gt;      0&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ugh, well the names weren‚Äôt read well into &lt;code&gt;R&lt;/code&gt;. While this isn‚Äôt a big issue to resolve, I don‚Äôt find it necessary for the final piece. the names of the shelters are anyway in Hebrew and only represnt a letter and some sort of number (for e.g, A/23, only in Hebrew). Therefore we‚Äôll leave it as is since what I‚Äôm interested in is the longitude and latitude coordinations and for that we don‚Äôt need the character column.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;retrieving-the-map&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Retrieving the map&lt;/h3&gt;
&lt;p&gt;So we have our data frame with long and lat points, let‚Äôs get our map. I want a map the can be readable in terms of streets and roads, therefore I‚Äôll give the &lt;code&gt;ggmap&lt;/code&gt; package a try&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;. Google requires you to register in order to recieve an API key to pull maps to plot. Unfortunately I won‚Äôt cover how to regiser in this blog but I‚Äôm sure you can find plenty of tutorials addressing it online.&lt;br /&gt;
Let‚Äôs get Be‚Äôer-Sheva‚Äôs map:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;b7_map &amp;lt;- get_map(location = c(34.7913 , 31.25181), 
              zoom = 13, scale = 2, maptype = &amp;quot;roadmap&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;What we did here was use the &lt;code&gt;get_map&lt;/code&gt; function to pull the map according to the long and lat coordinates I gave it of Be‚Äôer-Sheva. In addition you can change other features such as the zoom level, the maptype and more (See &lt;code&gt;?get_map&lt;/code&gt; for more info).&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;plot&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Plot&lt;/h3&gt;
&lt;p&gt;Now that we have our data set ready and the map as an object we can go on to plot it. ggmap extends ggplot features so we can run the data frame smoothly into the &lt;code&gt;ggmap&lt;/code&gt; function:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggmap(b7_map)+
  geom_point(shelters, mapping = aes(long,lat),
            color = &amp;quot;red&amp;quot;, size = 0.3, shape = 15)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/bomb-shelters/index_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;What we did was pass the b7_map as an object into the &lt;code&gt;ggmap&lt;/code&gt; function and add a geom, in this case &lt;code&gt;geom_point&lt;/code&gt; representing our shelter coordinates. However, this map doesn‚Äôt really help me in a time of need since it doesn‚Äôt show &lt;em&gt;my address&lt;/em&gt; clearly.&lt;/p&gt;
&lt;p&gt;Let‚Äôs try zooming in so that we can see what we‚Äôre looking at:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#retreiving a new map with a greater `zoom`
b7_map_zoom &amp;lt;- get_map(location = c(34.7913 , 31.25181), 
                    zoom = 16, scale = 2, maptype = &amp;quot;roadmap&amp;quot;)

p &amp;lt;- ggmap(b7_map_zoom)+
geom_point(shelters, mapping = aes(long,lat), color = &amp;quot;red&amp;quot;,
           size = 4, shape = 15)
p&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/bomb-shelters/index_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Much nicer and clearer. Using the zoom option in &lt;code&gt;get_map&lt;/code&gt; enables to center more on where I want. Great, this shows me some bomb shetlers I have around me in a time of need. Let‚Äôs add some fine tuning for our theme:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p+  
#for the title, caption and removing the X and Y axis
  labs (title = &amp;quot;Neighborhood B, Beer-Sheva, Israel, bomb shelters&amp;quot;,
        x = NULL, y = NULL,
        caption = &amp;quot;data: www.beer-sheva.muni.il | @Amit_Levinson&amp;quot;)+
  theme_minimal()+
  theme(text = element_text(family = &amp;quot;Microsoft Tai Le&amp;quot;),
    #Changing the position of the title
    plot.title = element_text(hjust = 0.5, size = 20, face = &amp;quot;bold&amp;quot;),
    axis.text = element_blank(),
    plot.caption = element_text(size = 9, face = &amp;quot;italic&amp;quot;, hjust = 0),
    panel.border = element_rect(color = &amp;quot;black&amp;quot;, size=2, fill = NA)
  )&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/bomb-shelters/index_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Perfect, I can now save the plot and distribute it if someone needs it.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggsave(&amp;quot;shelters_b_eng.png&amp;quot;, width = 8, height = 8)&lt;/code&gt;&lt;/pre&gt;
&lt;center&gt;
&lt;blockquote class=&#34;twitter-tweet&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;1.  I&amp;#39;ve been wanting to learn to plot maps in &lt;a href=&#34;https://twitter.com/hashtag/rstats?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#rstats&lt;/a&gt;&lt;br&gt;2. Yesterday I encountered open data our municipality publishes&lt;br&gt;3. Today missiles are fired towards Israel in response to assassination of a top terrorist.&lt;br&gt;&lt;br&gt;1+2+3: Plotting bomb shelter locations near where I live&lt;a href=&#34;https://twitter.com/hashtag/ggmap?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#ggmap&lt;/a&gt; &lt;a href=&#34;https://t.co/4Irz0ZKuZr&#34;&gt;pic.twitter.com/4Irz0ZKuZr&lt;/a&gt;&lt;/p&gt;&amp;mdash; Amit Levinson (@Amit_Levinson) &lt;a href=&#34;https://twitter.com/Amit_Levinson/status/1194274713759039488?ref_src=twsrc%5Etfw&#34;&gt;November 12, 2019&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;

&lt;/center&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;For a first map I decided to go with a static one, but an interactive one can definately be a 2.0 version of this blog. Hopefully we won‚Äôt need it.&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;‚Ü©&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
