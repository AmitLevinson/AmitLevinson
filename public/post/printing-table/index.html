<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.7.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Amit Levinson">

  
  
  
    
  
  <meta name="description" content="A tribute for for the KableExtra&#39;s ability to aestheticaly print descriptives for categorical variables">

  
  <link rel="alternate" hreflang="en-us" href="/post/printing-table/">

  


  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/zenburn.min.css" crossorigin="anonymous" title="hl-light">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/zenburn.min.css" crossorigin="anonymous" title="hl-dark" disabled>
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,400i%7CKarla:400,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  





<script async src="https://www.googletagmanager.com/gtag/js?id=UA-156329952-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           document.location = url;
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target);  
  }

  gtag('js', new Date());
  gtag('config', 'UA-156329952-1', {});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hudc5a425b3e555d4faa8838526864126b_16079_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hudc5a425b3e555d4faa8838526864126b_16079_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/post/printing-table/">

  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="twitter:site" content="@Amit_Levinson">
  <meta property="twitter:creator" content="@Amit_Levinson">
  
  <meta property="og:site_name" content="Amit Levinson">
  <meta property="og:url" content="/post/printing-table/">
  <meta property="og:title" content="Nicely Printing Categorical Variables with KableExtra | Amit Levinson">
  <meta property="og:description" content="A tribute for for the KableExtra&#39;s ability to aestheticaly print descriptives for categorical variables"><meta property="og:image" content="/images/icon_hudc5a425b3e555d4faa8838526864126b_16079_512x512_fill_lanczos_center_2.png">
  <meta property="twitter:image" content="/images/icon_hudc5a425b3e555d4faa8838526864126b_16079_512x512_fill_lanczos_center_2.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-05-01T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2020-05-01T00:00:00&#43;00:00">
  

  


    






  






<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/printing-table/"
  },
  "headline": "Nicely Printing Categorical Variables with KableExtra",
  
  "datePublished": "2020-05-01T00:00:00Z",
  "dateModified": "2020-05-01T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Amit Levinson"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Amit Levinson",
    "logo": {
      "@type": "ImageObject",
      "url": "img//"
    }
  },
  "description": "A tribute for for the KableExtra's ability to aestheticaly print descriptives for categorical variables"
}
</script>

  

  


  


  





  <title>Nicely Printing Categorical Variables with KableExtra | Amit Levinson</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">Amit Levinson</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#talks"><span>Talks</span></a>
        </li>

        
        

      

        

        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>

  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Nicely Printing Categorical Variables with KableExtra</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    May 1, 2020
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    8 min read
  </span>
  

  
  
  

  
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>


<style>
p.caption {
  font-size: 0.8em;
}
</style>
<p>This post is somewhat of a ~love post~ tribute to both the iteration abilities in R combined with the <a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html"><code>KableExtra</code></a> package. I set myself several goals for my thesis, one of them is doing my survey analysis in something other than SPSS. I wanted to finish my Masters’ with some broader knowledge of statistical programs and dive a little more into coding. I started learning R nearly a year ago so that when the time comes - When my pilot and survey results come in - I can analyze it all in R.</p>
<p>The time came and I started to analyze the data in R. However, the problem was, That I wasn’t going to do an OK job. After discovering much of R’s abilities, I wasn’t going to let myself copy+paste. So I wrote a few functions, manipulated some of the work and then it was time to get out the big guns; well big guns at least for me.</p>
<div id="the-problem" class="section level3">
<h3>The Problem</h3>
<p>In my pilot survey I had several questions (~20) that were categorical, ordinal and were simple constructs that didn’t require a more thorough analysis such as reliability of the scale. I wanted to nicely print all of these variables in one table, address any anomalies if needed and have them in the appendix for my supervisors to review.</p>
<p><strong>The issue was, how can I nicely print all categorical variables along with the original question, the possible answers and the distribution of responses?</strong></p>
<p>First, let’s look at our data:</p>
<pre class="r"><code>library(tidyverse) # dplyr, tidyr, readr &amp; purrr
library(here) # Project management
library(readxl) # For reading excel files
library(knitr) # Printing tables
library(kableExtra) # Printing tables, but nice ones
library(janitor) # To clean names
df_survey &lt;- read_xlsx(here(&quot;content&quot;, &quot;post&quot;, &quot;printing-categorical-variables-questions-with-kableextra&quot;, &quot;data&quot;,&quot;survey.xlsx&quot;))

head(df_survey)</code></pre>
<pre><code>## # A tibble: 6 x 12
##   Q2     Q4     Q6     Q7    Q11_1   Q13_1   Q15   Q26   Q27   Q30   Q32   Q37  
##   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1 Female Salar~ Simil~ Cent~ Once a~ At lea~ Never No    &lt;NA&gt;  &lt;NA&gt;  No    Yes  
## 2 Female Salar~ Below~ South Severa~ Every ~ Never No    &lt;NA&gt;  &lt;NA&gt;  No    Yes  
## 3 Female Stude~ Below~ South Betwee~ I&#39;ve n~ Never No    &lt;NA&gt;  &lt;NA&gt;  No    Yes  
## 4 Female Unemp~ Simil~ Cent~ Once a~ At lea~ Last~ No    &lt;NA&gt;  &lt;NA&gt;  No    Yes  
## 5 Male   Salar~ Simil~ Cent~ Once a~ At lea~ Last~ Yes   2-3 ~ Yes   No    No   
## 6 Female Salar~ Simil~ Cent~ Severa~ Last t~ Never No    &lt;NA&gt;  &lt;NA&gt;  No    Yes</code></pre>
<p>So we have a lot of information regarding our sample  data we collected. In order to nicely print all of our <em>character</em> columns, let’s start by removing anything other than a character column:</p>
<pre class="r"><code>df_char &lt;- df_survey %&gt;% 
  janitor::clean_names () %&gt;% 
  select_if(is.character) </code></pre>
<p>we’ll need to change the data to a long form. A first thought the comes to mind is to use the <code>pivot_longer</code> argument so that we have everything in one nice long table:</p>
<pre class="r"><code>df_long &lt;- df_char %&gt;% 
  pivot_longer(q2:q37, names_to = &quot;question&quot;) %&gt;% 
  count(question, value) %&gt;%
  group_by(question) %&gt;% 
  mutate(pct = n/sum(n)*100)


knitr::kable(df_long) %&gt;% 
  kableExtra::kable_styling() %&gt;% 
  kableExtra::scroll_box(height = &quot;400px&quot;)</code></pre>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
question
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
value
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
n
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
pct
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
Between once a week to once in a month
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
14.705882
</td>
</tr>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
Less than once a month
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
11.764706
</td>
</tr>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
Once a day
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
17.647059
</td>
</tr>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
Once a week
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
11.764706
</td>
</tr>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
Several times a day
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
17.647059
</td>
</tr>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
Several times a week
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
23.529412
</td>
</tr>
<tr>
<td style="text-align:left;">
q11_1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.941177
</td>
</tr>
<tr>
<td style="text-align:left;">
q13_1
</td>
<td style="text-align:left;">
About every week
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.941177
</td>
</tr>
<tr>
<td style="text-align:left;">
q13_1
</td>
<td style="text-align:left;">
At least once a month
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
38.235294
</td>
</tr>
<tr>
<td style="text-align:left;">
q13_1
</td>
<td style="text-align:left;">
Every three months
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
14.705882
</td>
</tr>
<tr>
<td style="text-align:left;">
q13_1
</td>
<td style="text-align:left;">
Every three to six months
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
11.764706
</td>
</tr>
<tr>
<td style="text-align:left;">
q13_1
</td>
<td style="text-align:left;">
I’ve never bought
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
14.705882
</td>
</tr>
<tr>
<td style="text-align:left;">
q13_1
</td>
<td style="text-align:left;">
Last time I bought was over half a year ago
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
17.647059
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Last half a year
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
8.823529
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Last month
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5.882353
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Last three months
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
8.823529
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Last week
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.941177
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Last year
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.941177
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Never
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
52.941176
</td>
</tr>
<tr>
<td style="text-align:left;">
q15
</td>
<td style="text-align:left;">
Over a year ago
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
17.647059
</td>
</tr>
<tr>
<td style="text-align:left;">
q2
</td>
<td style="text-align:left;">
Female
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
47.058824
</td>
</tr>
<tr>
<td style="text-align:left;">
q2
</td>
<td style="text-align:left;">
Male
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
52.941176
</td>
</tr>
<tr>
<td style="text-align:left;">
q26
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
58.823529
</td>
</tr>
<tr>
<td style="text-align:left;">
q26
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
38.235294
</td>
</tr>
<tr>
<td style="text-align:left;">
q26
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.941177
</td>
</tr>
<tr>
<td style="text-align:left;">
q27
</td>
<td style="text-align:left;">
2-3 times
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
11.764706
</td>
</tr>
<tr>
<td style="text-align:left;">
q27
</td>
<td style="text-align:left;">
5-7 times
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
11.764706
</td>
</tr>
<tr>
<td style="text-align:left;">
q27
</td>
<td style="text-align:left;">
Over 7 times
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
14.705882
</td>
</tr>
<tr>
<td style="text-align:left;">
q27
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
61.764706
</td>
</tr>
<tr>
<td style="text-align:left;">
q30
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.941177
</td>
</tr>
<tr>
<td style="text-align:left;">
q30
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
35.294118
</td>
</tr>
<tr>
<td style="text-align:left;">
q30
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
61.764706
</td>
</tr>
<tr>
<td style="text-align:left;">
q32
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
79.411765
</td>
</tr>
<tr>
<td style="text-align:left;">
q32
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
14.705882
</td>
</tr>
<tr>
<td style="text-align:left;">
q32
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5.882353
</td>
</tr>
<tr>
<td style="text-align:left;">
q37
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
17.647059
</td>
</tr>
<tr>
<td style="text-align:left;">
q37
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
73.529412
</td>
</tr>
<tr>
<td style="text-align:left;">
q37
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
8.823529
</td>
</tr>
<tr>
<td style="text-align:left;">
q4
</td>
<td style="text-align:left;">
Salaried employee
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
52.941176
</td>
</tr>
<tr>
<td style="text-align:left;">
q4
</td>
<td style="text-align:left;">
Self employed
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
8.823529
</td>
</tr>
<tr>
<td style="text-align:left;">
q4
</td>
<td style="text-align:left;">
Student
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
23.529412
</td>
</tr>
<tr>
<td style="text-align:left;">
q4
</td>
<td style="text-align:left;">
Student,Salaried employee
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
8.823529
</td>
</tr>
<tr>
<td style="text-align:left;">
q4
</td>
<td style="text-align:left;">
Student,Unemployed
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.941177
</td>
</tr>
<tr>
<td style="text-align:left;">
q4
</td>
<td style="text-align:left;">
Unemployed
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.941177
</td>
</tr>
<tr>
<td style="text-align:left;">
q6
</td>
<td style="text-align:left;">
Above average
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
14.705882
</td>
</tr>
<tr>
<td style="text-align:left;">
q6
</td>
<td style="text-align:left;">
Below average
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
47.058824
</td>
</tr>
<tr>
<td style="text-align:left;">
q6
</td>
<td style="text-align:left;">
Similar to average
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
38.235294
</td>
</tr>
<tr>
<td style="text-align:left;">
q7
</td>
<td style="text-align:left;">
Center
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
47.058824
</td>
</tr>
<tr>
<td style="text-align:left;">
q7
</td>
<td style="text-align:left;">
South
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
52.941176
</td>
</tr>
</tbody>
</table>
</div>
<p>Great, this prints nicely, but we’re left with several issues to address:</p>
<p><strong>1. We’re missing the actual questions</strong> - Notice how we only have “q10_1” but not description of what the actual question or variable is.</p>
<p><strong>2. Questions were reorganized alphabetically</strong> - Once we ran the <code>pivot_longer</code> <code>R</code> sorted our new dataframe alphabetically according to the question variable, but we might want it ordered chronologically according to the survey. Of course this is contingent on your data, I wanted to show it aligned to the order of the survey questions.</p>
<p><strong>3. Some of the responses aren’t ordered</strong> - Notice how some of the responses are randomly ordered, when ideally we’d want them to be ordered by hierarchy. For example question XXXXX</p>
<p><strong>4. Remove duplicated information</strong> - Our column question, and if we add another with the text, will have duplicate information. While the value changes within questions, we don’t need to show it’s from that question only once. In addition, once we’ll add the question title it’ll be even more cluttered, so we’ll have to deal with that.</p>
<p>Let’s address these issues and nicely finish up our table.</p>
<div id="adding-information-to-our-questions" class="section level4">
<h4>Adding information to our questions</h4>
<p>When you download the survey data from Qualtrics you also receive it with the original questions. When I personally analyzed the data I removed it, but here it’s perfect for providing additional information. If you don’t have questions but variables, you can either skip this section or add information about the variables themselves.</p>
<p>To add the questions I found it pretty straight forward to just to combine the current data_long dataset with a dataset containing our questions. We’ll use a copy of the original survey data that only contains the questions, let’s have a look:</p>
<pre class="r"><code>df_questions &lt;- read_xlsx(here(&quot;content&quot;, &quot;post&quot;, &quot;printing-categorical-variables-questions-with-kableextra&quot;, &quot;data&quot;, &quot;questions.xlsx&quot;))
df_questions[,1:3]</code></pre>
<pre><code>## # A tibble: 1 x 3
##   Q2     Q4                   Q6                                                
##   &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                                             
## 1 Gender What&#39;s your occupat~ The average income for an individual is X, you&#39;re~</code></pre>
<p>Great, now let’s turn it to a long format so that each row is a question id with the details of it as a value. Then we can join it with our current dataset of answers:</p>
<pre class="r"><code>df_q_clean &lt;- df_questions %&gt;% 
  clean_names() %&gt;% 
  pivot_longer(cols = q2:q37, names_to = &quot;question&quot;, values_to = &quot;text&quot;) 

df_long &lt;-  inner_join(df_long, df_q_clean, by = c(&quot;question&quot; = &quot;question&quot;))

head(df_long)</code></pre>
<pre><code>## # A tibble: 6 x 5
## # Groups:   question [1]
##   question value                            n   pct text                        
##   &lt;chr&gt;    &lt;chr&gt;                        &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;                       
## 1 q11_1    Between once a week to once~     5  14.7 Every how often do you cons~
## 2 q11_1    Less than once a month           4  11.8 Every how often do you cons~
## 3 q11_1    Once a day                       6  17.6 Every how often do you cons~
## 4 q11_1    Once a week                      4  11.8 Every how often do you cons~
## 5 q11_1    Several times a day              6  17.6 Every how often do you cons~
## 6 q11_1    Several times a week             8  23.5 Every how often do you cons~</code></pre>
<p>Using the <code>inner_join</code> we kept only questions we want to display. Now let’s turn to our second issue and address the order of our questions. Basically, we want it to be ordered by the value of the number itself and not how it’s sorted alphabaetically (q11_1 before q_5). What we’ll do, and there might be a quicker way, is use regex (regular expression) to use the number values to sort by. Here it goes:</p>
<pre class="r"><code>df_long_sorted &lt;- df_long %&gt;% 
  mutate(q_num = str_remove_all(question, &quot;[a-z]&quot;),
    q_num = str_replace_all(q_num, &quot;_&quot;, &quot;.&quot;),
    q_num = str_remove(q_num, &quot;\\.$&quot;),
    q_num = as.numeric(q_num)) %&gt;% 
  group_by(question) %&gt;% 
  arrange(q_num) %&gt;% 
  select(-q_num)

head(df_long_sorted)</code></pre>
<pre><code>## # A tibble: 6 x 5
## # Groups:   question [2]
##   question value                         n   pct text                   
##   &lt;chr&gt;    &lt;chr&gt;                     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;                  
## 1 q2       Female                       16 47.1  Gender                 
## 2 q2       Male                         18 52.9  Gender                 
## 3 q4       Salaried employee            18 52.9  What&#39;s your occupation?
## 4 q4       Self employed                 3  8.82 What&#39;s your occupation?
## 5 q4       Student                       8 23.5  What&#39;s your occupation?
## 6 q4       Student,Salaried employee     3  8.82 What&#39;s your occupation?</code></pre>
<p>Perfect!</p>
<p>We used some simple regular expressions to create a variable containing only our question number and sorted it by it. Now that we got that out of the way, let’s head on to our next issue. Our next problem is that we want some of our questions to be organized not by the count or some randomness, but by hierarchy of the answer options, for example ‘a few times a day’, ‘Once a day’, ‘several times a week’ and so on.<br />
Personally, I didn’t have a magicly automated answer but manualy provided levels to each answer. You can do this by setting them as a factor, or the way I did it: Create another table with the possible answer options and provide each answer with a value. You can then sort the answers by the order of numbers you provided, let’s have a look:</p>
<p>Alright! Much better!</p>
</div>
</div>
<div id="map-map_df" class="section level3">
<h3>map &amp; map_df</h3>
<p>The issue we’re facing also provides us with a great opportunity to explore <a href="https://purrr.tidyverse.org/">{purrr’s}</a> <code>map</code> and <code>map_df</code>. If we think back on what we just did, we basically aggregated all our columns into one so we can compute the frequency of each category. But what if instead of manipulating them when they’re in one column, we manipulate each of the original columns?</p>
</div>

    </div>

    







<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/printing-table/&amp;text=Nicely%20Printing%20Categorical%20Variables%20with%20KableExtra" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/printing-table/&amp;t=Nicely%20Printing%20Categorical%20Variables%20with%20KableExtra" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Nicely%20Printing%20Categorical%20Variables%20with%20KableExtra&amp;body=/post/printing-table/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/printing-table/&amp;title=Nicely%20Printing%20Categorical%20Variables%20with%20KableExtra" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Nicely%20Printing%20Categorical%20Variables%20with%20KableExtra%20/post/printing-table/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/printing-table/&amp;title=Nicely%20Printing%20Categorical%20Variables%20with%20KableExtra" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  






  
  
  
    
  
  
  <div class="media author-card content-widget-hr">
    
      
      <img class="portrait mr-3" src="/authors/admin/avatar_hub71a408706e589f09faa92e611c4d1ab_121232_250x250_fill_q90_lanczos_center.jpg" alt="Photo of Amit Levinson">
    

    <div class="media-body">
      <h5 class="card-title"><a href="/">Amit Levinson</a></h5>
      <h6 class="card-subtitle">Sociology MA student</h6>
      <p class="card-text">I&rsquo;m an avid R user interested in R analysis, visualizations, drug markets and political participation.</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
    
    
    
    
    <li>
      <a href="mailto:amitlevinson1@gmail.com" >
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/Amit_Levinson" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/AmitLevinson" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/amit-levinson-b23851150" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://amitlevinson.com/cv/" target="_blank" rel="noopener">
        <i class="ai ai-cv"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>









  
  



  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js" integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    

    
    

    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/js/academic.min.e5c8525332f417fe3589df9a6b25b6c4.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/"></a>
    
    
       &middot; 
      <a href="/terms/"></a>
    
  </p>
  

 <p class="powered-by">
    © Amit Levinson 2020 &middot; 

    Made in <a href="https://cran.r-project.org/" target="_blank" rel="noopener"><i class="fab fa-r-project"></i></a> with <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a><a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener"> Academic theme</a>
 &#183; <a href="https://www.r-bloggers.com/" target="_blank" rel="noopener">R-Bloggers</a>

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
